domains:
  customer-management:
    description: All aspects related to customer data, registration, and account management
    owners:
      - "Data Team"
    tags:
      - customer
  product-catalog:
    description: Product and catalog data including variants and SKUs
    owners:
      - "Data Team"
    tags:
      - product
      - catalog
  sales:
    description: Orders and order items lifecycle data
    owners:
      - "Data Team"
    tags:
      - sales

entities:
  Base:
    description: Required fieds for every Ingestion/Staging step.
    attributes:
      ID:
        name: id
        type: integer
        primary_key: true
        description: The unique identifier in our systems.
        checks:
          - name: not_null
          - name: unique
      
      CreatedAt:
        name: created_at
        type: timestamp
        description: Timestamp when the record was created.
        checks:
          - name: not_null

      UpdatedAt:
        name: updated_at
        type: timestamp
        description: Timestamp when the record was last updated.
        checks:
          - name: not_null

  Customer:
    description: Customer is an individual/business registered on our platform.
    domains:
      - customer-management
    attributes:
      ID:
        name: customer_id
        type: integer
        description: Surrogate key for customer in staging.
        checks:
          - name: not_null
          - name: unique
      Email:
        name: email
        type: string
        description: E-mail address used during registration.
        checks:
          - name: not_null
      FullName:
        name: full_name
        type: string
        description: Full name of the customer.
      Country:
        name: country
        type: string
        description: Country of residence.
      Age:
        name: age
        type: integer
        description: Age of the customer.
        checks:
          - name: range
            min: 0

  Product:
    description: A product offered for sale.
    domains:
      - product-catalog
    attributes:
      ID:
        name: product_id
        type: integer
        description: Surrogate key for product in staging.
        checks:
          - name: not_null
          - name: unique
      Name:
        name: name
        type: string
        description: Product display name.
        checks:
          - name: not_null
      Category:
        name: category
        type: string
        description: Product category.
        checks:
          - name: not_null
      SKU:
        name: sku
        type: string
        description: Stock keeping unit for the product.
        checks:
          - name: not_null
          - name: unique

  Variant:
    description: A specific variation of a product.
    domains:
      - product-catalog
    attributes:
      ID:
        name: variant_id
        type: integer
        description: Surrogate key for variant in staging.
        checks:
          - name: not_null
          - name: unique
      ProductID:
        name: product_id
        type: integer
        description: Reference to Product.ID.
        checks:
          - name: not_null
          - name: positive
      VariantSKU:
        name: variant_sku
        type: string
        description: SKU for the variant.
        checks:
          - name: not_null
          - name: unique
      Color:
        name: color
        type: string
        description: Variant color.
      Size:
        name: size
        type: string
        description: Variant size.
      ManufacturingPrice:
        name: manufacturing_price
        type: numeric
        description: Manufacturing cost per unit.
        checks:
          - name: not_null
      SellingPrice:
        name: selling_price
        type: numeric
        description: Selling price per unit.
        checks:
          - name: not_null
      StockQuantity:
        name: stock_quantity
        type: integer
        description: Available stock quantity.
        checks:
          - name: not_null
      IsActive:
        name: is_active
        type: boolean
        description: Whether the variant is active.
        checks:
          - name: not_null

  Order:
    description: A purchase order placed by a customer.
    domains:
      - sales
    attributes:
      ID:
        name: order_id
        type: integer
        description: Surrogate key for order in staging.
        checks:
          - name: not_null
          - name: unique
      CustomerID:
        name: customer_id
        type: integer
        description: Reference to Customer.ID for the purchaser.
        checks:
          - name: not_null
          - name: positive
      OrderNumber:
        name: order_number
        type: string
        description: Human-readable order number.
      OrderDate:
        name: order_date
        type: timestamp
        description: When the order was placed.
        checks:
          - name: not_null
      Status:
        name: status
        type: string
        description: Order lifecycle status.
        checks:
          - name: not_null
          - name: accepted_values
            value:
              - pending
              - paid
              - cancelled
              - shipped
      TotalAmount:
        name: total_amount
        type: numeric
        description: Total order amount.
        checks:
          - name: not_null
          - name: range
            min: 0

  OrderItem:
    description: A line item in an order.
    domains:
      - sales
    attributes:
      ID:
        name: order_item_id
        type: integer
        description: Surrogate key for order item in staging.
        checks:
          - name: not_null
          - name: unique
      OrderID:
        name: order_id
        type: integer
        description: Reference to Order.ID this item belongs to.
        checks:
          - name: not_null
          - name: positive
      VariantID:
        name: variant_id
        type: integer
        description: Reference to Variant.ID purchased.
        checks:
          - name: not_null
          - name: positive
      Quantity:
        name: quantity
        type: integer
        description: Quantity purchased (must be positive).
        checks:
          - name: not_null
          - name: range
            min: 1
      UnitPrice:
        name: unit_price
        type: numeric
        description: Price per unit at purchase time.
        checks:
          - name: not_null
          - name: range
            min: 0
      TotalPrice:
        name: total_price
        type: numeric
        description: Total price for the line (Quantity * UnitPrice).
        checks:
          - name: not_null
          - name: range
            min: 0
